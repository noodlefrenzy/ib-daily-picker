# MACD Momentum with Flow Confirmation Strategy
#
# Combines MACD signal line crossover with options flow data.
# Requires bullish flow to confirm MACD buy signal.

strategy:
  name: "MACD Flow Momentum"
  version: "1.0.0"
  description: "MACD bullish crossover confirmed by options flow"
  author: "IB Daily Picker"
  tags: ["momentum", "flow", "macd"]

indicators:
  - name: "macd"
    type: "MACD"
    params:
      fast_period: 12
      slow_period: 26
      signal_period: 9

  - name: "rsi_14"
    type: "RSI"
    params:
      period: 14
      source: "close"

  - name: "ema_20"
    type: "EMA"
    params:
      period: 20
      source: "close"

  - name: "atr_14"
    type: "ATR"
    params:
      period: 14

entry:
  conditions:
    # RSI showing momentum but not overbought
    - type: "indicator_threshold"
      indicator: "rsi_14"
      operator: "gt"
      value: 45

    - type: "indicator_threshold"
      indicator: "rsi_14"
      operator: "lt"
      value: 70

    # Bullish flow confirmation
    - type: "flow_signal"
      direction: "bullish"
      min_premium: 75000
      recency_minutes: 120

  logic: "all"

exit:
  take_profit:
    type: "percentage"
    value: 6.0

  stop_loss:
    type: "atr_multiple"
    value: 2.0
    multiplier: 2.0

  trailing_stop:
    type: "percentage"
    value: 4.0

risk:
  profile: "moderate"
  min_risk_reward: 2.0

filters:
  min_volume: 1000000
  min_price: 15.0
  max_price: 400.0
